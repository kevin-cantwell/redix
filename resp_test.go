package redix_test

import (
	"bytes"

	"github.com/kevin-cantwell/redix"
	. "github.com/onsi/ginkgo"
	. "github.com/onsi/gomega"
)

var _ = Describe("ParseResp", func() {
	Context("Valid RESP", func() {
		It("Should parse integers.", func() {
			// Max signed 64 bit
			resp, err := redix.NewReader(bytes.NewReader([]byte(":9223372036854775807\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal("9223372036854775807"))

			// Minus one, which is the null value for bulk strings
			resp, err = redix.NewReader(bytes.NewReader([]byte(":-1\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal("-1"))

			// Allow negation symbol with zero (not defined in spec, we just allow it)
			resp, err = redix.NewReader(bytes.NewReader([]byte(":-0\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal("0"))

			// Zero
			resp, err = redix.NewReader(bytes.NewReader([]byte(":0\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal("0"))

			// Min singed 64 bit
			resp, err = redix.NewReader(bytes.NewReader([]byte(":-9223372036854775808\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal("-9223372036854775808"))
		})
		It("Should parse simple strings.", func() {
			resp, err := redix.NewReader(bytes.NewReader([]byte("+OK\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal("OK"))

			// Empty strings are valid
			resp, err = redix.NewReader(bytes.NewReader([]byte("+\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal(""))
		})
		It("Should parse errors.", func() {
			resp, err := redix.NewReader(bytes.NewReader([]byte("-ERR something\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal("ERR something"))

			// Empty strings are valid
			resp, err = redix.NewReader(bytes.NewReader([]byte("-\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal(""))
		})
		It("Should parse bulk strings.", func() {
			resp, err := redix.NewReader(bytes.NewReader([]byte("$10\r\n1234\r\n7890\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal("1234\r\n7890"))

			// Empty strings are valid
			resp, err = redix.NewReader(bytes.NewReader([]byte("$0\r\n\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(string(resp[0])).To(Equal(""))

			// Null Bulk String
			resp, err = redix.NewReader(bytes.NewReader([]byte("$-1\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(resp[0]).To(BeNil())
		})
		It("Should parse arrays.", func() {
			// Empty array
			resp, err := redix.NewReader(bytes.NewReader([]byte("*0\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(resp).To(Equal([][]byte{}))

			// Null Array
			resp, err = redix.NewReader(bytes.NewReader([]byte("*-1\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(resp).To(BeNil())

			// Array of three integers
			resp, err = redix.NewReader(bytes.NewReader([]byte("*3\r\n:1\r\n:2\r\n:3\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(resp).To(HaveLen(3))
			Expect(string(resp[0])).To(Equal("1"))
			Expect(string(resp[1])).To(Equal("2"))
			Expect(string(resp[2])).To(Equal("3"))

			// Array of mixed types
			resp, err = redix.NewReader(bytes.NewReader([]byte("*4\r\n:1\r\n+OK\r\n-ERR\r\n$6\r\nhey\nho\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(resp).To(HaveLen(4))
			Expect(string(resp[0])).To(Equal("1"))
			Expect(string(resp[1])).To(Equal("OK"))
			Expect(string(resp[2])).To(Equal("ERR"))
			Expect(string(resp[3])).To(Equal("hey\nho"))

			// Make sure :+-$ chars may appear in bulk strings
			resp, err = redix.NewReader(bytes.NewReader([]byte("*1\r\n$4\r\n:+-$\r\n"))).ParseObject()
			Expect(err).To(BeNil())
			Expect(resp).To(HaveLen(1))
			Expect(string(resp[0])).To(Equal(":+-$"))

			// verylargeresp := `*238\r\n$255\r\n{"date_key":"20160229","user_id":"4249353","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4249353.png","user_agent":"Ruby","age":33,"gender":"","country":"gb","app_version":"3.2.3","app_platform":"iphone","account_age":33}\r\n$257\r\n{"date_key":"20160229","user_id":"12354090","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/12354090.png","user_agent":"Ruby","age":39,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":39}\r\n$251\r\n{"date_key":"20160229","user_id":"18697342","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18697342.png","user_agent":"Ruby","age":35,"gender":"","country":"","app_version":"","app_platform":"android","account_age":35}\r\n$252\r\n{"date_key":"20160229","user_id":"19614299","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/19614299.png","user_agent":"Ruby","age":21,"gender":"","country":"gb","app_version":"","app_platform":"iphone","account_age":21}\r\n$253\r\n{"date_key":"20160229","user_id":"3119047","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3119047.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.1.3","app_platform":"iphone","account_age":0}\r\n$257\r\n{"date_key":"20160229","user_id":"831210","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/831210.png","user_agent":"Ruby","age":24,"gender":"male","country":"us","app_version":"3.2.3","app_platform":"iphone","account_age":24}\r\n$251\r\n{"date_key":"20160229","user_id":"15271387","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/15271387.png","user_agent":"Ruby","age":26,"gender":"","country":"","app_version":"","app_platform":"android","account_age":26}\r\n$249\r\n{"date_key":"20160229","user_id":"1421935","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1421935.png","user_agent":"Ruby","age":32,"gender":"","country":"","app_version":"","app_platform":"android","account_age":32}\r\n$257\r\n{"date_key":"20160229","user_id":"16362625","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16362625.png","user_agent":"Ruby","age":18,"gender":"","country":"ie","app_version":"3.3.6","app_platform":"iphone","account_age":18}\r\n$255\r\n{"date_key":"20160229","user_id":"20528402","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/20528402.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"11678478","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/11678478.png","user_agent":"Ruby","age":0,"gender":"","country":"gb","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$257\r\n{"date_key":"20160229","user_id":"13333568","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13333568.png","user_agent":"Ruby","age":31,"gender":"","country":"us","app_version":"3.2.1","app_platform":"iphone","account_age":31}\r\n$255\r\n{"date_key":"20160229","user_id":"3382509","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3382509.png","user_agent":"Ruby","age":26,"gender":"","country":"gb","app_version":"3.3.3","app_platform":"iphone","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"6642252","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6642252.png","user_agent":"Ruby","age":35,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":35}\r\n$255\r\n{"date_key":"20160229","user_id":"3857692","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3857692.png","user_agent":"Ruby","age":24,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":24}\r\n$254\r\n{"date_key":"20160229","user_id":"508897","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/508897.png","user_agent":"Ruby","age":35,"gender":"","country":"us","app_version":"3.3.3","app_platform":"android","account_age":35}\r\n$251\r\n{"date_key":"20160229","user_id":"18153420","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18153420.png","user_agent":"Ruby","age":18,"gender":"","country":"","app_version":"","app_platform":"android","account_age":18}\r\n$249\r\n{"date_key":"20160229","user_id":"3457722","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3457722.png","user_agent":"Ruby","age":39,"gender":"","country":"","app_version":"","app_platform":"android","account_age":39}\r\n$249\r\n{"date_key":"20160229","user_id":"5760639","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5760639.png","user_agent":"Ruby","age":24,"gender":"","country":"","app_version":"","app_platform":"android","account_age":24}\r\n$255\r\n{"date_key":"20160229","user_id":"1108916","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1108916.png","user_agent":"Ruby","age":25,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":25}\r\n$257\r\n{"date_key":"20160229","user_id":"16678205","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16678205.png","user_agent":"Ruby","age":47,"gender":"","country":"us","app_version":"3.0.7","app_platform":"iphone","account_age":47}\r\n$255\r\n{"date_key":"20160229","user_id":"8290369","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/8290369.png","user_agent":"Ruby","age":32,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":32}\r\n$249\r\n{"date_key":"20160229","user_id":"8441524","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/8441524.png","user_agent":"Ruby","age":27,"gender":"","country":"","app_version":"","app_platform":"android","account_age":27}\r\n$255\r\n{"date_key":"20160229","user_id":"9648211","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9648211.png","user_agent":"Ruby","age":41,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":41}\r\n$255\r\n{"date_key":"20160229","user_id":"3839530","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3839530.png","user_agent":"Ruby","age":25,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":25}\r\n$255\r\n{"date_key":"20160229","user_id":"3318337","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3318337.png","user_agent":"Ruby","age":29,"gender":"","country":"us","app_version":"3.3.5","app_platform":"iphone","account_age":29}\r\n$255\r\n{"date_key":"20160229","user_id":"1312145","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1312145.png","user_agent":"Ruby","age":22,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":22}\r\n$255\r\n{"date_key":"20160229","user_id":"4100220","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4100220.png","user_agent":"Ruby","age":31,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":31}\r\n$255\r\n{"date_key":"20160229","user_id":"4845163","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4845163.png","user_agent":"Ruby","age":28,"gender":"","country":"gb","app_version":"3.3.5","app_platform":"iphone","account_age":28}\r\n$255\r\n{"date_key":"20160229","user_id":"5852844","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5852844.png","user_agent":"Ruby","age":27,"gender":"","country":"us","app_version":"3.2.1","app_platform":"iphone","account_age":27}\r\n$253\r\n{"date_key":"20160229","user_id":"5741064","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5741064.png","user_agent":"Ruby","age":0,"gender":"","country":"GB","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"11727375","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/11727375.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":0}\r\n$253\r\n{"date_key":"20160229","user_id":"4037468","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4037468.png","user_agent":"Ruby","age":0,"gender":"","country":"GB","app_version":"3.3.1","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"8552422","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/8552422.png","user_agent":"Ruby","age":23,"gender":"","country":"us","app_version":"3.3.1","app_platform":"iphone","account_age":23}\r\n$255\r\n{"date_key":"20160229","user_id":"8502450","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/8502450.png","user_agent":"Ruby","age":27,"gender":"","country":"us","app_version":"3.0.7","app_platform":"iphone","account_age":27}\r\n$255\r\n{"date_key":"20160229","user_id":"9384299","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9384299.png","user_agent":"Ruby","age":30,"gender":"","country":"th","app_version":"3.3.1","app_platform":"iphone","account_age":30}\r\n$255\r\n{"date_key":"20160229","user_id":"1248797","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1248797.png","user_agent":"Ruby","age":22,"gender":"","country":"us","app_version":"3.3.2","app_platform":"iphone","account_age":22}\r\n$255\r\n{"date_key":"20160229","user_id":"7107234","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7107234.png","user_agent":"Ruby","age":28,"gender":"","country":"gb","app_version":"3.1.3","app_platform":"iphone","account_age":28}\r\n$257\r\n{"date_key":"20160229","user_id":"17105583","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/17105583.png","user_agent":"Ruby","age":29,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":29}\r\n$257\r\n{"date_key":"20160229","user_id":"18369850","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18369850.png","user_agent":"Ruby","age":39,"gender":"","country":"gb","app_version":"3.3.3","app_platform":"iphone","account_age":39}\r\n$249\r\n{"date_key":"20160229","user_id":"5907377","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5907377.png","user_agent":"Ruby","age":47,"gender":"","country":"","app_version":"","app_platform":"android","account_age":47}\r\n$251\r\n{"date_key":"20160229","user_id":"19219201","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/19219201.png","user_agent":"Ruby","age":28,"gender":"","country":"","app_version":"","app_platform":"android","account_age":28}\r\n$249\r\n{"date_key":"20160229","user_id":"3479738","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3479738.png","user_agent":"Ruby","age":43,"gender":"","country":"","app_version":"","app_platform":"android","account_age":43}\r\n$255\r\n{"date_key":"20160229","user_id":"3243101","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3243101.png","user_agent":"Ruby","age":26,"gender":"","country":"gb","app_version":"3.3.6","app_platform":"iphone","account_age":26}\r\n$257\r\n{"date_key":"20160229","user_id":"10563083","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/10563083.png","user_agent":"Ruby","age":29,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":29}\r\n$257\r\n{"date_key":"20160229","user_id":"16902762","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16902762.png","user_agent":"Ruby","age":19,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":19}\r\n$257\r\n{"date_key":"20160229","user_id":"17262916","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/17262916.png","user_agent":"Ruby","age":25,"gender":"","country":"us","app_version":"3.1.5","app_platform":"iphone","account_age":25}\r\n$255\r\n{"date_key":"20160229","user_id":"2243354","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2243354.png","user_agent":"Ruby","age":20,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":20}\r\n$257\r\n{"date_key":"20160229","user_id":"17413704","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/17413704.png","user_agent":"Ruby","age":26,"gender":"","country":"ca","app_version":"3.3.1","app_platform":"iphone","account_age":26}\r\n$257\r\n{"date_key":"20160229","user_id":"12690201","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/12690201.png","user_agent":"Ruby","age":20,"gender":"","country":"gb","app_version":"3.3.3","app_platform":"iphone","account_age":20}\r\n$253\r\n{"date_key":"20160229","user_id":"648539","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/648539.png","user_agent":"Ruby","age":33,"gender":"","country":"us","app_version":"3.3.4","app_platform":"iphone","account_age":33}\r\n$251\r\n{"date_key":"20160229","user_id":"18411180","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18411180.png","user_agent":"Ruby","age":36,"gender":"","country":"","app_version":"","app_platform":"android","account_age":36}\r\n$253\r\n{"date_key":"20160229","user_id":"942199","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/942199.png","user_agent":"Ruby","age":21,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":21}\r\n$255\r\n{"date_key":"20160229","user_id":"12247013","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/12247013.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"7304390","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7304390.png","user_agent":"Ruby","age":26,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"1157952","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1157952.png","user_agent":"Ruby","age":35,"gender":"","country":"us","app_version":"3.3.5","app_platform":"iphone","account_age":35}\r\n$253\r\n{"date_key":"20160229","user_id":"8677200","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/8677200.png","user_agent":"Ruby","age":0,"gender":"","country":"ca","app_version":"3.1.4","app_platform":"iphone","account_age":0}\r\n$251\r\n{"date_key":"20160229","user_id":"14690778","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/14690778.png","user_agent":"Ruby","age":33,"gender":"","country":"","app_version":"","app_platform":"android","account_age":33}\r\n$251\r\n{"date_key":"20160229","user_id":"681372","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/681372.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.1","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"1168719","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1168719.png","user_agent":"Ruby","age":19,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":19}\r\n$257\r\n{"date_key":"20160229","user_id":"13112711","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13112711.png","user_agent":"Ruby","age":30,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":30}\r\n$257\r\n{"date_key":"20160229","user_id":"13427687","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13427687.png","user_agent":"Ruby","age":20,"gender":"","country":"us","app_version":"3.3.2","app_platform":"iphone","account_age":20}\r\n$255\r\n{"date_key":"20160229","user_id":"6520529","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6520529.png","user_agent":"Ruby","age":25,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":25}\r\n$255\r\n{"date_key":"20160229","user_id":"5340213","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5340213.png","user_agent":"Ruby","age":19,"gender":"","country":"gb","app_version":"3.3.3","app_platform":"iphone","account_age":19}\r\n$255\r\n{"date_key":"20160229","user_id":"6641771","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6641771.png","user_agent":"Ruby","age":24,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":24}\r\n$257\r\n{"date_key":"20160229","user_id":"15625283","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/15625283.png","user_agent":"Ruby","age":41,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":41}\r\n$253\r\n{"date_key":"20160229","user_id":"6202492","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6202492.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":0}\r\n$251\r\n{"date_key":"20160229","user_id":"19000785","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/19000785.png","user_agent":"Ruby","age":30,"gender":"","country":"","app_version":"","app_platform":"android","account_age":30}\r\n$255\r\n{"date_key":"20160229","user_id":"4560004","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4560004.png","user_agent":"Ruby","age":31,"gender":"","country":"us","app_version":"3.2.1","app_platform":"iphone","account_age":31}\r\n$251\r\n{"date_key":"20160229","user_id":"13970629","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13970629.png","user_agent":"Ruby","age":28,"gender":"","country":"","app_version":"","app_platform":"android","account_age":28}\r\n$257\r\n{"date_key":"20160229","user_id":"16990179","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16990179.png","user_agent":"Ruby","age":24,"gender":"","country":"us","app_version":"3.1.5","app_platform":"iphone","account_age":24}\r\n$257\r\n{"date_key":"20160229","user_id":"16869824","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16869824.png","user_agent":"Ruby","age":30,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":30}\r\n$253\r\n{"date_key":"20160229","user_id":"5009178","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5009178.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"4438125","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4438125.png","user_agent":"Ruby","age":37,"gender":"","country":"gb","app_version":"3.3.6","app_platform":"iphone","account_age":37}\r\n$255\r\n{"date_key":"20160229","user_id":"4481543","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4481543.png","user_agent":"Ruby","age":39,"gender":"","country":"gb","app_version":"3.3.5","app_platform":"iphone","account_age":39}\r\n$249\r\n{"date_key":"20160229","user_id":"9807692","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9807692.png","user_agent":"Ruby","age":32,"gender":"","country":"","app_version":"","app_platform":"android","account_age":32}\r\n$255\r\n{"date_key":"20160229","user_id":"9003183","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9003183.png","user_agent":"Ruby","age":21,"gender":"","country":"gb","app_version":"3.1.7","app_platform":"iphone","account_age":21}\r\n$253\r\n{"date_key":"20160229","user_id":"198515","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/198515.png","user_agent":"Ruby","age":29,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":29}\r\n$251\r\n{"date_key":"20160229","user_id":"14653906","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/14653906.png","user_agent":"Ruby","age":33,"gender":"","country":"","app_version":"","app_platform":"android","account_age":33}\r\n$257\r\n{"date_key":"20160229","user_id":"18219082","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18219082.png","user_agent":"Ruby","age":28,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":28}\r\n$257\r\n{"date_key":"20160229","user_id":"10005491","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/10005491.png","user_agent":"Ruby","age":26,"gender":"","country":"br","app_version":"3.3.6","app_platform":"iphone","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"11580964","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/11580964.png","user_agent":"Ruby","age":0,"gender":"","country":"ca","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"6139595","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6139595.png","user_agent":"Ruby","age":26,"gender":"","country":"GB","app_version":"3.2.2","app_platform":"iphone","account_age":26}\r\n$257\r\n{"date_key":"20160229","user_id":"20553419","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/20553419.png","user_agent":"Ruby","age":29,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":29}\r\n$249\r\n{"date_key":"20160229","user_id":"9141471","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9141471.png","user_agent":"Ruby","age":36,"gender":"","country":"","app_version":"","app_platform":"android","account_age":36}\r\n$255\r\n{"date_key":"20160229","user_id":"5356471","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5356471.png","user_agent":"Ruby","age":22,"gender":"","country":"gb","app_version":"3.3.3","app_platform":"iphone","account_age":22}\r\n$255\r\n{"date_key":"20160229","user_id":"7748818","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7748818.png","user_agent":"Ruby","age":36,"gender":"","country":"US","app_version":"3.2.2","app_platform":"iphone","account_age":36}\r\n$257\r\n{"date_key":"20160229","user_id":"20098468","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/20098468.png","user_agent":"Ruby","age":18,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":18}\r\n$255\r\n{"date_key":"20160229","user_id":"1626361","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1626361.png","user_agent":"Ruby","age":32,"gender":"","country":"gb","app_version":"3.3.3","app_platform":"iphone","account_age":32}\r\n$251\r\n{"date_key":"20160229","user_id":"17280724","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/17280724.png","user_agent":"Ruby","age":33,"gender":"","country":"","app_version":"","app_platform":"android","account_age":33}\r\n$257\r\n{"date_key":"20160229","user_id":"17626296","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/17626296.png","user_agent":"Ruby","age":39,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":39}\r\n$253\r\n{"date_key":"20160229","user_id":"5306743","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5306743.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"3845900","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3845900.png","user_agent":"Ruby","age":26,"gender":"","country":"gb","app_version":"3.2.1","app_platform":"iphone","account_age":26}\r\n$258\r\n{"date_key":"20160229","user_id":"11616378","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/11616378.png","user_agent":"Ruby","age":30,"gender":"","country":"US","app_version":"2.8.7","app_platform":"android","account_age":30}\r\n$255\r\n{"date_key":"20160229","user_id":"11770309","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/11770309.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":0}\r\n$259\r\n{"date_key":"20160229","user_id":"2273860","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2273860.png","user_agent":"Ruby","age":25,"gender":"male","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":25}\r\n$255\r\n{"date_key":"20160229","user_id":"1002493","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1002493.png","user_agent":"Ruby","age":29,"gender":"","country":"us","app_version":"3.1.7","app_platform":"iphone","account_age":29}\r\n$255\r\n{"date_key":"20160229","user_id":"9358071","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9358071.png","user_agent":"Ruby","age":22,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":22}\r\n$255\r\n{"date_key":"20160229","user_id":"6678717","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6678717.png","user_agent":"Ruby","age":25,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":25}\r\n$257\r\n{"date_key":"20160229","user_id":"16205904","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16205904.png","user_agent":"Ruby","age":30,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":30}\r\n$257\r\n{"date_key":"20160229","user_id":"15238821","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/15238821.png","user_agent":"Ruby","age":27,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":27}\r\n$249\r\n{"date_key":"20160229","user_id":"4116120","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4116120.png","user_agent":"Ruby","age":31,"gender":"","country":"","app_version":"","app_platform":"android","account_age":31}\r\n$257\r\n{"date_key":"20160229","user_id":"15608580","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/15608580.png","user_agent":"Ruby","age":28,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":28}\r\n$255\r\n{"date_key":"20160229","user_id":"4013277","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4013277.png","user_agent":"Ruby","age":25,"gender":"","country":"gb","app_version":"3.2.2","app_platform":"iphone","account_age":25}\r\n$261\r\n{"date_key":"20160229","user_id":"3174190","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3174190.png","user_agent":"Ruby","age":27,"gender":"female","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":27}\r\n$253\r\n{"date_key":"20160229","user_id":"4941742","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4941742.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$257\r\n{"date_key":"20160229","user_id":"20490979","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/20490979.png","user_agent":"Ruby","age":20,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":20}\r\n$255\r\n{"date_key":"20160229","user_id":"3909230","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3909230.png","user_agent":"Ruby","age":32,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":32}\r\n$255\r\n{"date_key":"20160229","user_id":"4376196","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4376196.png","user_agent":"Ruby","age":26,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"14637411","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/14637411.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.1.7","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"3127578","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3127578.png","user_agent":"Ruby","age":26,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"5986325","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5986325.png","user_agent":"Ruby","age":21,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":21}\r\n$249\r\n{"date_key":"20160229","user_id":"4249608","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4249608.png","user_agent":"Ruby","age":32,"gender":"","country":"","app_version":"","app_platform":"android","account_age":32}\r\n$255\r\n{"date_key":"20160229","user_id":"14132929","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/14132929.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"6792206","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6792206.png","user_agent":"Ruby","age":23,"gender":"","country":"us","app_version":"3.2.1","app_platform":"iphone","account_age":23}\r\n$257\r\n{"date_key":"20160229","user_id":"16164324","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16164324.png","user_agent":"Ruby","age":28,"gender":"","country":"th","app_version":"3.3.3","app_platform":"iphone","account_age":28}\r\n$251\r\n{"date_key":"20160229","user_id":"13518578","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13518578.png","user_agent":"Ruby","age":37,"gender":"","country":"","app_version":"","app_platform":"android","account_age":37}\r\n$255\r\n{"date_key":"20160229","user_id":"2503645","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2503645.png","user_agent":"Ruby","age":21,"gender":"","country":"GB","app_version":"3.3.3","app_platform":"iphone","account_age":21}\r\n$255\r\n{"date_key":"20160229","user_id":"8813508","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/8813508.png","user_agent":"Ruby","age":44,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":44}\r\n$257\r\n{"date_key":"20160229","user_id":"17432972","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/17432972.png","user_agent":"Ruby","age":29,"gender":"","country":"th","app_version":"3.3.1","app_platform":"iphone","account_age":29}\r\n$253\r\n{"date_key":"20160229","user_id":"574596","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/574596.png","user_agent":"Ruby","age":23,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":23}\r\n$253\r\n{"date_key":"20160229","user_id":"1340332","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1340332.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$257\r\n{"date_key":"20160229","user_id":"10728186","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/10728186.png","user_agent":"Ruby","age":21,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":21}\r\n$253\r\n{"date_key":"20160229","user_id":"2230156","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2230156.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.1.2","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"2505955","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2505955.png","user_agent":"Ruby","age":27,"gender":"","country":"gb","app_version":"3.2.1","app_platform":"iphone","account_age":27}\r\n$255\r\n{"date_key":"20160229","user_id":"3496174","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3496174.png","user_agent":"Ruby","age":23,"gender":"","country":"GB","app_version":"3.3.3","app_platform":"iphone","account_age":23}\r\n$255\r\n{"date_key":"20160229","user_id":"1842363","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1842363.png","user_agent":"Ruby","age":20,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":20}\r\n$257\r\n{"date_key":"20160229","user_id":"17991814","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/17991814.png","user_agent":"Ruby","age":31,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":31}\r\n$257\r\n{"date_key":"20160229","user_id":"20368490","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/20368490.png","user_agent":"Ruby","age":44,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":44}\r\n$251\r\n{"date_key":"20160229","user_id":"19502419","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/19502419.png","user_agent":"Ruby","age":31,"gender":"","country":"","app_version":"","app_platform":"android","account_age":31}\r\n$255\r\n{"date_key":"20160229","user_id":"9989609","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9989609.png","user_agent":"Ruby","age":22,"gender":"","country":"us","app_version":"3.3.1","app_platform":"iphone","account_age":22}\r\n$257\r\n{"date_key":"20160229","user_id":"10236918","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/10236918.png","user_agent":"Ruby","age":24,"gender":"","country":"gb","app_version":"3.2.2","app_platform":"iphone","account_age":24}\r\n$257\r\n{"date_key":"20160229","user_id":"13593259","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13593259.png","user_agent":"Ruby","age":24,"gender":"","country":"us","app_version":"3.2.0","app_platform":"iphone","account_age":24}\r\n$255\r\n{"date_key":"20160229","user_id":"2182221","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2182221.png","user_agent":"Ruby","age":26,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"7314479","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7314479.png","user_agent":"Ruby","age":29,"gender":"","country":"GB","app_version":"3.3.1","app_platform":"iphone","account_age":29}\r\n$255\r\n{"date_key":"20160229","user_id":"2971306","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2971306.png","user_agent":"Ruby","age":25,"gender":"","country":"GB","app_version":"3.3.3","app_platform":"iphone","account_age":25}\r\n$253\r\n{"date_key":"20160229","user_id":"6816405","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6816405.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.1","app_platform":"iphone","account_age":0}\r\n$262\r\n{"date_key":"20160229","user_id":"1651340","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1651340.png","user_agent":"Ruby","age":24,"gender":"female","country":"US","app_version":"3.1.2","app_platform":"android","account_age":24}\r\n$255\r\n{"date_key":"20160229","user_id":"2153899","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2153899.png","user_agent":"Ruby","age":23,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":23}\r\n$257\r\n{"date_key":"20160229","user_id":"17893366","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/17893366.png","user_agent":"Ruby","age":27,"gender":"","country":"tr","app_version":"3.3.3","app_platform":"iphone","account_age":27}\r\n$255\r\n{"date_key":"20160229","user_id":"4233383","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4233383.png","user_agent":"Ruby","age":31,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":31}\r\n$255\r\n{"date_key":"20160229","user_id":"7969764","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7969764.png","user_agent":"Ruby","age":34,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":34}\r\n$259\r\n{"date_key":"20160229","user_id":"1154120","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1154120.png","user_agent":"Ruby","age":0,"gender":"female","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":0}\r\n$257\r\n{"date_key":"20160229","user_id":"19792347","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/19792347.png","user_agent":"Ruby","age":21,"gender":"","country":"us","app_version":"3.3.4","app_platform":"iphone","account_age":21}\r\n$255\r\n{"date_key":"20160229","user_id":"1079813","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1079813.png","user_agent":"Ruby","age":28,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":28}\r\n$255\r\n{"date_key":"20160229","user_id":"2862637","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2862637.png","user_agent":"Ruby","age":23,"gender":"","country":"gb","app_version":"3.3.1","app_platform":"iphone","account_age":23}\r\n$255\r\n{"date_key":"20160229","user_id":"5550942","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5550942.png","user_agent":"Ruby","age":32,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":32}\r\n$257\r\n{"date_key":"20160229","user_id":"15762838","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/15762838.png","user_agent":"Ruby","age":30,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":30}\r\n$255\r\n{"date_key":"20160229","user_id":"9074124","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9074124.png","user_agent":"Ruby","age":24,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":24}\r\n$250\r\n{"date_key":"20160229","user_id":"3420111","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3420111.png","user_agent":"Ruby","age":21,"gender":"","country":"gb","app_version":"","app_platform":"iphone","account_age":21}\r\n$253\r\n{"date_key":"20160229","user_id":"9067300","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9067300.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$257\r\n{"date_key":"20160229","user_id":"16045983","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16045983.png","user_agent":"Ruby","age":26,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":26}\r\n$251\r\n{"date_key":"20160229","user_id":"19336295","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/19336295.png","user_agent":"Ruby","age":33,"gender":"","country":"","app_version":"","app_platform":"android","account_age":33}\r\n$251\r\n{"date_key":"20160229","user_id":"14568602","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/14568602.png","user_agent":"Ruby","age":23,"gender":"","country":"","app_version":"","app_platform":"android","account_age":23}\r\n$251\r\n{"date_key":"20160229","user_id":"16459477","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16459477.png","user_agent":"Ruby","age":35,"gender":"","country":"","app_version":"","app_platform":"android","account_age":35}\r\n$257\r\n{"date_key":"20160229","user_id":"18515782","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18515782.png","user_agent":"Ruby","age":26,"gender":"","country":"us","app_version":"3.2.3","app_platform":"iphone","account_age":26}\r\n$257\r\n{"date_key":"20160229","user_id":"20335789","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/20335789.png","user_agent":"Ruby","age":21,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":21}\r\n$257\r\n{"date_key":"20160229","user_id":"13048095","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13048095.png","user_agent":"Ruby","age":24,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":24}\r\n$255\r\n{"date_key":"20160229","user_id":"6354289","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6354289.png","user_agent":"Ruby","age":23,"gender":"","country":"us","app_version":"3.3.1","app_platform":"iphone","account_age":23}\r\n$253\r\n{"date_key":"20160229","user_id":"6725629","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6725629.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.5","app_platform":"iphone","account_age":0}\r\n$249\r\n{"date_key":"20160229","user_id":"5986335","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5986335.png","user_agent":"Ruby","age":27,"gender":"","country":"","app_version":"","app_platform":"android","account_age":27}\r\n$255\r\n{"date_key":"20160229","user_id":"9048489","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9048489.png","user_agent":"Ruby","age":23,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":23}\r\n$257\r\n{"date_key":"20160229","user_id":"13718641","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13718641.png","user_agent":"Ruby","age":21,"gender":"","country":"ca","app_version":"3.3.1","app_platform":"iphone","account_age":21}\r\n$255\r\n{"date_key":"20160229","user_id":"4450770","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4450770.png","user_agent":"Ruby","age":22,"gender":"","country":"GB","app_version":"3.1.6","app_platform":"iphone","account_age":22}\r\n$255\r\n{"date_key":"20160229","user_id":"2671432","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2671432.png","user_agent":"Ruby","age":27,"gender":"","country":"us","app_version":"3.3.1","app_platform":"iphone","account_age":27}\r\n$253\r\n{"date_key":"20160229","user_id":"8944761","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/8944761.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.1.4","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"9155536","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9155536.png","user_agent":"Ruby","age":38,"gender":"","country":"pt","app_version":"3.3.3","app_platform":"iphone","account_age":38}\r\n$255\r\n{"date_key":"20160229","user_id":"4652690","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4652690.png","user_agent":"Ruby","age":47,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":47}\r\n$251\r\n{"date_key":"20160229","user_id":"677225","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/677225.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":0}\r\n$251\r\n{"date_key":"20160229","user_id":"15455486","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/15455486.png","user_agent":"Ruby","age":26,"gender":"","country":"","app_version":"","app_platform":"android","account_age":26}\r\n$257\r\n{"date_key":"20160229","user_id":"15188633","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/15188633.png","user_agent":"Ruby","age":35,"gender":"","country":"ca","app_version":"3.3.3","app_platform":"iphone","account_age":35}\r\n$257\r\n{"date_key":"20160229","user_id":"18639305","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18639305.png","user_agent":"Ruby","age":27,"gender":"","country":"th","app_version":"3.3.0","app_platform":"iphone","account_age":27}\r\n$257\r\n{"date_key":"20160229","user_id":"13130113","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13130113.png","user_agent":"Ruby","age":27,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":27}\r\n$257\r\n{"date_key":"20160229","user_id":"10371277","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/10371277.png","user_agent":"Ruby","age":26,"gender":"","country":"us","app_version":"3.3.1","app_platform":"iphone","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"7082670","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7082670.png","user_agent":"Ruby","age":25,"gender":"","country":"us","app_version":"3.3.5","app_platform":"iphone","account_age":25}\r\n$257\r\n{"date_key":"20160229","user_id":"19079945","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/19079945.png","user_agent":"Ruby","age":24,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":24}\r\n$254\r\n{"date_key":"20160229","user_id":"3924749","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3924749.png","user_agent":"Ruby","age":0,"gender":"","country":"GB","app_version":"3.0.3","app_platform":"android","account_age":0}\r\n$251\r\n{"date_key":"20160229","user_id":"13110891","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13110891.png","user_agent":"Ruby","age":21,"gender":"","country":"","app_version":"","app_platform":"android","account_age":21}\r\n$249\r\n{"date_key":"20160229","user_id":"5453629","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5453629.png","user_agent":"Ruby","age":31,"gender":"","country":"","app_version":"","app_platform":"android","account_age":31}\r\n$251\r\n{"date_key":"20160229","user_id":"12351309","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/12351309.png","user_agent":"Ruby","age":33,"gender":"","country":"","app_version":"","app_platform":"android","account_age":33}\r\n$257\r\n{"date_key":"20160229","user_id":"15599698","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/15599698.png","user_agent":"Ruby","age":24,"gender":"","country":"gb","app_version":"3.3.5","app_platform":"iphone","account_age":24}\r\n$251\r\n{"date_key":"20160229","user_id":"12117472","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/12117472.png","user_agent":"Ruby","age":41,"gender":"","country":"","app_version":"","app_platform":"android","account_age":41}\r\n$255\r\n{"date_key":"20160229","user_id":"5062438","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5062438.png","user_agent":"Ruby","age":28,"gender":"","country":"US","app_version":"3.3.6","app_platform":"iphone","account_age":28}\r\n$255\r\n{"date_key":"20160229","user_id":"7352578","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7352578.png","user_agent":"Ruby","age":20,"gender":"","country":"us","app_version":"3.3.2","app_platform":"iphone","account_age":20}\r\n$255\r\n{"date_key":"20160229","user_id":"5959068","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5959068.png","user_agent":"Ruby","age":37,"gender":"","country":"GB","app_version":"3.3.0","app_platform":"iphone","account_age":37}\r\n$257\r\n{"date_key":"20160229","user_id":"20600930","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/20600930.png","user_agent":"Ruby","age":18,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":18}\r\n$255\r\n{"date_key":"20160229","user_id":"2036523","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2036523.png","user_agent":"Ruby","age":18,"gender":"","country":"gb","app_version":"3.3.3","app_platform":"iphone","account_age":18}\r\n$257\r\n{"date_key":"20160229","user_id":"12273852","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/12273852.png","user_agent":"Ruby","age":22,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":22}\r\n$253\r\n{"date_key":"20160229","user_id":"9712527","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9712527.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":0}\r\n$249\r\n{"date_key":"20160229","user_id":"6052160","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6052160.png","user_agent":"Ruby","age":35,"gender":"","country":"","app_version":"","app_platform":"android","account_age":35}\r\n$253\r\n{"date_key":"20160229","user_id":"981263","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/981263.png","user_agent":"Ruby","age":21,"gender":"","country":"us","app_version":"3.3.5","app_platform":"iphone","account_age":21}\r\n$257\r\n{"date_key":"20160229","user_id":"12545789","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/12545789.png","user_agent":"Ruby","age":23,"gender":"","country":"gb","app_version":"3.3.0","app_platform":"iphone","account_age":23}\r\n$257\r\n{"date_key":"20160229","user_id":"11448848","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/11448848.png","user_agent":"Ruby","age":25,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":25}\r\n$249\r\n{"date_key":"20160229","user_id":"4747335","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4747335.png","user_agent":"Ruby","age":24,"gender":"","country":"","app_version":"","app_platform":"android","account_age":24}\r\n$257\r\n{"date_key":"20160229","user_id":"12834250","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/12834250.png","user_agent":"Ruby","age":36,"gender":"","country":"ca","app_version":"3.2.1","app_platform":"iphone","account_age":36}\r\n$255\r\n{"date_key":"20160229","user_id":"2304307","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2304307.png","user_agent":"Ruby","age":22,"gender":"","country":"us","app_version":"3.1.7","app_platform":"iphone","account_age":22}\r\n$257\r\n{"date_key":"20160229","user_id":"14975862","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/14975862.png","user_agent":"Ruby","age":29,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":29}\r\n$257\r\n{"date_key":"20160229","user_id":"16775771","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16775771.png","user_agent":"Ruby","age":20,"gender":"","country":"ca","app_version":"3.3.6","app_platform":"iphone","account_age":20}\r\n$251\r\n{"date_key":"20160229","user_id":"857533","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/857533.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":0}\r\n$257\r\n{"date_key":"20160229","user_id":"14117140","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/14117140.png","user_agent":"Ruby","age":32,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":32}\r\n$255\r\n{"date_key":"20160229","user_id":"2130291","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2130291.png","user_agent":"Ruby","age":24,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":24}\r\n$255\r\n{"date_key":"20160229","user_id":"2839816","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2839816.png","user_agent":"Ruby","age":40,"gender":"","country":"GB","app_version":"3.3.3","app_platform":"iphone","account_age":40}\r\n$251\r\n{"date_key":"20160229","user_id":"10403635","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/10403635.png","user_agent":"Ruby","age":34,"gender":"","country":"","app_version":"","app_platform":"android","account_age":34}\r\n$257\r\n{"date_key":"20160229","user_id":"16108561","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/16108561.png","user_agent":"Ruby","age":32,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":32}\r\n$255\r\n{"date_key":"20160229","user_id":"7928347","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7928347.png","user_agent":"Ruby","age":29,"gender":"","country":"gb","app_version":"3.3.1","app_platform":"iphone","account_age":29}\r\n$257\r\n{"date_key":"20160229","user_id":"18773350","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18773350.png","user_agent":"Ruby","age":22,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":22}\r\n$255\r\n{"date_key":"20160229","user_id":"2429945","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2429945.png","user_agent":"Ruby","age":26,"gender":"","country":"gb","app_version":"3.3.2","app_platform":"iphone","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"7620637","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7620637.png","user_agent":"Ruby","age":26,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":26}\r\n$249\r\n{"date_key":"20160229","user_id":"6326968","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6326968.png","user_agent":"Ruby","age":24,"gender":"","country":"","app_version":"","app_platform":"android","account_age":24}\r\n$255\r\n{"date_key":"20160229","user_id":"2367841","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2367841.png","user_agent":"Ruby","age":26,"gender":"","country":"us","app_version":"3.3.5","app_platform":"iphone","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"7811402","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/7811402.png","user_agent":"Ruby","age":33,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":33}\r\n$257\r\n{"date_key":"20160229","user_id":"19973447","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/19973447.png","user_agent":"Ruby","age":38,"gender":"","country":"sg","app_version":"3.3.3","app_platform":"iphone","account_age":38}\r\n$255\r\n{"date_key":"20160229","user_id":"3894738","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3894738.png","user_agent":"Ruby","age":23,"gender":"","country":"GB","app_version":"3.0.9","app_platform":"iphone","account_age":23}\r\n$253\r\n{"date_key":"20160229","user_id":"3172707","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3172707.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":0}\r\n$251\r\n{"date_key":"20160229","user_id":"11433469","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/11433469.png","user_agent":"Ruby","age":26,"gender":"","country":"","app_version":"","app_platform":"android","account_age":26}\r\n$249\r\n{"date_key":"20160229","user_id":"4515634","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4515634.png","user_agent":"Ruby","age":33,"gender":"","country":"","app_version":"","app_platform":"android","account_age":33}\r\n$257\r\n{"date_key":"20160229","user_id":"18372168","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18372168.png","user_agent":"Ruby","age":23,"gender":"","country":"ca","app_version":"3.3.4","app_platform":"iphone","account_age":23}\r\n$255\r\n{"date_key":"20160229","user_id":"1006718","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/1006718.png","user_agent":"Ruby","age":19,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":19}\r\n$249\r\n{"date_key":"20160229","user_id":"3394915","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3394915.png","user_agent":"Ruby","age":26,"gender":"","country":"","app_version":"","app_platform":"android","account_age":26}\r\n$255\r\n{"date_key":"20160229","user_id":"9289102","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/9289102.png","user_agent":"Ruby","age":30,"gender":"","country":"gb","app_version":"3.3.0","app_platform":"iphone","account_age":30}\r\n$257\r\n{"date_key":"20160229","user_id":"14313726","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/14313726.png","user_agent":"Ruby","age":23,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":23}\r\n$257\r\n{"date_key":"20160229","user_id":"17679862","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/17679862.png","user_agent":"Ruby","age":23,"gender":"","country":"us","app_version":"3.3.4","app_platform":"iphone","account_age":23}\r\n$253\r\n{"date_key":"20160229","user_id":"559064","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/559064.png","user_agent":"Ruby","age":20,"gender":"","country":"us","app_version":"3.2.1","app_platform":"iphone","account_age":20}\r\n$257\r\n{"date_key":"20160229","user_id":"13774178","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13774178.png","user_agent":"Ruby","age":35,"gender":"","country":"us","app_version":"3.3.0","app_platform":"iphone","account_age":35}\r\n$255\r\n{"date_key":"20160229","user_id":"3437785","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3437785.png","user_agent":"Ruby","age":24,"gender":"","country":"us","app_version":"3.1.7","app_platform":"iphone","account_age":24}\r\n$253\r\n{"date_key":"20160229","user_id":"3118196","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3118196.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":0}\r\n$249\r\n{"date_key":"20160229","user_id":"6790964","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6790964.png","user_agent":"Ruby","age":25,"gender":"","country":"","app_version":"","app_platform":"android","account_age":25}\r\n$257\r\n{"date_key":"20160229","user_id":"13865223","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/13865223.png","user_agent":"Ruby","age":34,"gender":"","country":"us","app_version":"3.2.2","app_platform":"iphone","account_age":34}\r\n$255\r\n{"date_key":"20160229","user_id":"8068880","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/8068880.png","user_agent":"Ruby","age":30,"gender":"","country":"us","app_version":"3.1.7","app_platform":"iphone","account_age":30}\r\n$255\r\n{"date_key":"20160229","user_id":"5339138","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/5339138.png","user_agent":"Ruby","age":25,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":25}\r\n$253\r\n{"date_key":"20160229","user_id":"3056659","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/3056659.png","user_agent":"Ruby","age":0,"gender":"","country":"us","app_version":"3.3.3","app_platform":"iphone","account_age":0}\r\n$255\r\n{"date_key":"20160229","user_id":"2491032","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/2491032.png","user_agent":"Ruby","age":22,"gender":"","country":"gb","app_version":"3.2.3","app_platform":"iphone","account_age":22}\r\n$257\r\n{"date_key":"20160229","user_id":"18778315","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/18778315.png","user_agent":"Ruby","age":28,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":28}\r\n$257\r\n{"date_key":"20160229","user_id":"20535816","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/20535816.png","user_agent":"Ruby","age":22,"gender":"","country":"us","app_version":"3.3.6","app_platform":"iphone","account_age":22}\r\n$255\r\n{"date_key":"20160229","user_id":"6152819","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6152819.png","user_agent":"Ruby","age":22,"gender":"","country":"gb","app_version":"3.3.3","app_platform":"iphone","account_age":22}\r\n$249\r\n{"date_key":"20160229","user_id":"6816519","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6816519.png","user_agent":"Ruby","age":19,"gender":"","country":"","app_version":"","app_platform":"android","account_age":19}\r\n$255\r\n{"date_key":"20160229","user_id":"6146843","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/6146843.png","user_agent":"Ruby","age":29,"gender":"","country":"us","app_version":"3.0.7","app_platform":"iphone","account_age":29}\r\n$249\r\n{"date_key":"20160229","user_id":"4678772","image_url":"http://timehop.uploads.s3.amazonaws.com/stats/screenshots/20160229/4678772.png","user_agent":"Ruby","age":26,"gender":"","country":"","app_version":"","app_platform":"android","account_age":26}\r\n`
			// _, err = redix.NewReader(bytes.NewReader([]byte(verylargeresp))).ParseObject()
			// Expect(err).To(BeNil())
		})
	})
	Context("Invalid RESP", func() {
		It("Should validate integers.", func() {
			// Check for a value
			_, err := redix.NewReader(bytes.NewReader([]byte(":\r\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))

			// Check for CRLF
			_, err = redix.NewReader(bytes.NewReader([]byte(":123\r"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`EOF`))

			// Check positive 64-bit boundary +1
			_, err = redix.NewReader(bytes.NewReader([]byte(":9223372036854775808\r\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))

			// Check negative 64-bit boundary -1
			_, err = redix.NewReader(bytes.NewReader([]byte(":-9223372036854775809\r\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))
		})
		It("Should validate simple strings.", func() {
			// Check for CR
			_, err := redix.NewReader(bytes.NewReader([]byte("+No\rCR\r\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))

			// Check for LF
			_, err = redix.NewReader(bytes.NewReader([]byte("+No\nLF\r\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))

			// Check for terminating CRLF
			_, err = redix.NewReader(bytes.NewReader([]byte("+NOTOK\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))
		})
		It("Should validate errors.", func() {
			// Check for CR
			_, err := redix.NewReader(bytes.NewReader([]byte("-No\rCR\r\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))

			// Check for LF
			_, err = redix.NewReader(bytes.NewReader([]byte("-NOTOK\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))
		})
		It("Should validate bulk strings.", func() {
			_, err := redix.NewReader(bytes.NewReader([]byte("$123"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`EOF`))

			r := redix.NewReader(bytes.NewReader([]byte("$3\r\n123")))
			_, err = r.ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`EOF`))

			_, err = redix.NewReader(bytes.NewReader([]byte("%3\r\nfoo\r\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))

			_, err = redix.NewReader(bytes.NewReader([]byte("$three\r\nfoo\r\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))

			_, err = redix.NewReader(bytes.NewReader([]byte("$9\r\n1234\r\n7890\r\n"))).ParseObject()
			Expect(err).NotTo(BeNil())
			Expect(err.Error()).To(Equal(`resp: invalid syntax`))
		})
	})
})
